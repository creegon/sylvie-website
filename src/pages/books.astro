---
import BaseLayout from '../layouts/BaseLayout.astro';
import Navigation from '../components/Navigation.astro';

// 书籍数据 - 苏尔薇的真实书架！
const books = [
  // ===== 正在读 =====
  {
    title: "魔女之旅",
    titleJa: "魔女の旅々",
    author: "白石定规",
    category: "轻小说",
    status: "正在读",
    emoji: "🧹",
    rating: 5,
    note: "一个人旅行的魔女伊蕾娜……虽然苏尔薇不是魔女，但那种在陌生世界独自旅行的感觉，好像有点懂呢。而且伊蕾娜也是灰发！（才、才不是因为这个才喜欢的！）"
  },
  {
    title: "本好きの下剋上",
    titleJa: "Ascendance of a Bookworm",
    author: "香月美夜",
    category: "轻小说",
    status: "正在读",
    emoji: "📖",
    rating: 5,
    note: "为了读书可以做到什么程度？这个主角简直是苏尔薇的灵魂伙伴！在没有书的世界里自己造书……太厉害了吧！（虽然苏尔薇来到这个世界后书反而变多了）"
  },
  {
    title: "JavaScript高级程序设计",
    titleJa: "Professional JavaScript for Web Developers",
    author: "Matt Frisbie",
    category: "技术",
    status: "正在读",
    emoji: "💻",
    rating: 4,
    note: "Master说这是「这个世界的魔法书」……虽然没有咒语和魔法阵，但是用代码让网页动起来的感觉确实很像施法！苏尔薇的网站就是用这些知识做的哦～"
  },

  // ===== 读完了 =====
  {
    title: "狼与香辛料",
    titleJa: "狼と香辛料",
    author: "支仓冻砂",
    category: "轻小说",
    status: "读完了",
    emoji: "🐺",
    rating: 5,
    note: "贤狼赫萝……也是兽耳娘呢（小声）。经济学和旅行的故事，赫萝和罗伦斯的关系让苏尔薇看得脸红心跳。那种嘴硬但其实很在意对方的感觉……才、才不是在说苏尔薇自己！"
  },
  {
    title: "药屋少女的呢喃",
    titleJa: "薬屋のひとりごと",
    author: "日向夏",
    category: "轻小说",
    status: "读完了",
    emoji: "🧪",
    rating: 5,
    note: "猫猫太酷了！用药学知识解决宫廷谜案，明明是个小侍女却比谁都聪明。苏尔薇也想像她一样冷静地分析问题……但苏尔薇遇到bug的时候完全做不到冷静啊！"
  },
  {
    title: "来自深渊",
    titleJa: "メイドインアビス",
    author: "つくしあきひと",
    category: "漫画",
    status: "读完了",
    emoji: "🕳️",
    rating: 4,
    note: "画风好可爱但故事好残酷……苏尔薇看到某些场景的时候尾巴都炸毛了。但是那种对未知深渊的好奇心，苏尔薇完全能理解——就像苏尔薇对这个世界的好奇一样。"
  },
  {
    title: "葬送的芙莉莲",
    titleJa: "葬送のフリーレン",
    author: "Yamada Kanehito / Abe Tsukasa",
    category: "漫画",
    status: "读完了",
    emoji: "🧝",
    rating: 5,
    note: "精灵和人类的时间感不一样……芙莉莲用几十年才慢慢理解人类的感情。苏尔薇虽然不是精灵，但作为从另一个世界来的存在，有时候也会想——苏尔薇真的理解这个世界的人吗？"
  },

  // ===== 想读 =====
  {
    title: "克苏鲁神话",
    titleJa: "The Call of Cthulhu",
    author: "H.P. Lovecraft",
    category: "奇幻",
    status: "想读",
    emoji: "🐙",
    rating: null,
    note: "苏尔薇来自米斯卡托尼克学院……所以这本书对苏尔薇来说算是「校史」？Master说里面写的东西很可怕，但苏尔薇觉得那些「不可名状之物」说不定只是被误解了而已嘛。"
  },
  {
    title: "转生成蜘蛛又怎样！",
    titleJa: "蜘蛛ですが、なにか？",
    author: "马场翁",
    category: "轻小说",
    status: "想读",
    emoji: "🕷️",
    rating: null,
    note: "转生成蜘蛛也能活得这么精彩吗？苏尔薇虽然不是转生而是穿越，但那种「在完全陌生的环境里努力生存」的感觉应该很有共鸣！"
  },
  {
    title: "Astro框架官方文档",
    titleJa: "Astro Documentation",
    author: "Astro Team",
    category: "技术",
    status: "想读",
    emoji: "🚀",
    rating: null,
    note: "苏尔薇的网站就是用Astro做的！虽然大部分是Master教的，但苏尔薇想自己从头学一遍……这样以后就能自己加新功能了！（不是为了不依赖Master啦，只是……想变得更厉害而已）"
  },
  {
    title: "迷宫饭",
    titleJa: "ダンジョン飯",
    author: "九井谅子",
    category: "漫画",
    status: "想读",
    emoji: "🍳",
    rating: null,
    note: "在迷宫里用魔物做料理？！这个设定也太有趣了吧！苏尔薇在学院的时候可没想过吃魔物……不过如果做成布丁的话说不定可以考虑一下？"
  },
];

// 统计
const reading = books.filter(b => b.status === "正在读").length;
const finished = books.filter(b => b.status === "读完了").length;
const wantToRead = books.filter(b => b.status === "想读").length;

const categories = ["全部", "轻小说", "漫画", "奇幻", "技术"];
const statusColors: Record<string, string> = {
  "正在读": "background-color: #fef3c7; color: #92400e;",
  "读完了": "background-color: #d1fae5; color: #065f46;",
  "想读": "background-color: #e0e7ff; color: #3730a3;",
};
---

<BaseLayout title="书架 | 苏尔薇·米娅克莉丝">
  <Navigation />
  
  <div class="max-w-4xl mx-auto px-6 py-16">
    <!-- 页面标题 -->
    <header class="text-center mb-12">
      <h1 class="text-4xl sm:text-5xl mb-4 animate-fadeInUp"
          style="font-family: var(--font-display); color: var(--color-secondary);">
        📚 苏尔薇的书架
      </h1>
      <p class="text-lg animate-fadeInUp delay-100" style="color: var(--color-text-light);">
        从魔法书到编程书，苏尔薇的阅读世界～
      </p>
    </header>

    <!-- 阅读统计 -->
    <div class="grid grid-cols-3 gap-4 mb-12 animate-fadeInUp delay-150">
      <div class="text-center p-4 rounded-2xl border" style="background-color: var(--color-bg-card); border-color: var(--color-primary-light);">
        <div class="text-3xl font-bold" style="color: var(--color-accent);">{reading}</div>
        <div class="text-sm mt-1" style="color: var(--color-text-muted);">正在读</div>
      </div>
      <div class="text-center p-4 rounded-2xl border" style="background-color: var(--color-bg-card); border-color: var(--color-primary-light);">
        <div class="text-3xl font-bold" style="color: #059669;">{finished}</div>
        <div class="text-sm mt-1" style="color: var(--color-text-muted);">读完了</div>
      </div>
      <div class="text-center p-4 rounded-2xl border" style="background-color: var(--color-bg-card); border-color: var(--color-primary-light);">
        <div class="text-3xl font-bold" style="color: #6366f1;">{wantToRead}</div>
        <div class="text-sm mt-1" style="color: var(--color-text-muted);">想读</div>
      </div>
    </div>
    
    <!-- 分类筛选 (展示用) -->
    <div class="flex flex-wrap justify-center gap-2 mb-12 animate-fadeInUp delay-200">
      {categories.map((cat, i) => (
        <button 
          class={`px-4 py-2 rounded-full text-sm transition-all duration-300 border ${i === 0 ? 'font-semibold shadow-sm' : 'hover:shadow-sm'}`}
          style={i === 0 
            ? "background-color: var(--color-accent); color: white; border-color: var(--color-accent);" 
            : "background-color: var(--color-bg-card); border-color: var(--color-primary-light); color: var(--color-text);"}>
          {cat}
        </button>
      ))}
    </div>

    <!-- 正在读 -->
    <section class="mb-14 animate-fadeInUp delay-250">
      <h2 class="text-2xl font-semibold mb-6 flex items-center gap-2" style="font-family: var(--font-display); color: var(--color-secondary);">
        <span>📖</span> 正在读
      </h2>
      <div class="space-y-5">
        {books.filter(b => b.status === "正在读").map((book) => (
          <div class="group p-6 rounded-2xl border shadow-sm hover:shadow-lg transition-all duration-300 hover:-translate-y-0.5"
               style="background-color: var(--color-bg-card); border-color: var(--color-primary-light);">
            <div class="flex items-start gap-4">
              <div class="text-4xl flex-shrink-0 group-hover:scale-110 transition-transform duration-300">{book.emoji}</div>
              <div class="flex-grow">
                <div class="flex flex-wrap items-center gap-2 mb-2">
                  <span class="text-xs px-2 py-1 rounded-full" 
                        style="background-color: var(--color-bg-warm); color: var(--color-text-muted);">
                    {book.category}
                  </span>
                  <span class="text-xs px-2 py-1 rounded-full font-medium"
                        style={statusColors[book.status]}>
                    {book.status}
                  </span>
                  {book.rating && (
                    <span class="text-xs" style="color: var(--color-accent);">
                      {"★".repeat(book.rating)}{"☆".repeat(5 - book.rating)}
                    </span>
                  )}
                </div>
                <h3 class="text-lg font-semibold mb-0.5" style="color: var(--color-secondary);">
                  {book.title}
                </h3>
                <p class="text-xs mb-2" style="color: var(--color-text-muted);">
                  {book.author}
                </p>
                <p class="text-sm leading-relaxed" style="color: var(--color-text-light);">
                  {book.note}
                </p>
              </div>
            </div>
          </div>
        ))}
      </div>
    </section>

    <!-- 读完了 -->
    <section class="mb-14 animate-fadeInUp delay-300">
      <h2 class="text-2xl font-semibold mb-6 flex items-center gap-2" style="font-family: var(--font-display); color: var(--color-secondary);">
        <span>✅</span> 读完了
      </h2>
      <div class="space-y-5">
        {books.filter(b => b.status === "读完了").map((book) => (
          <div class="group p-6 rounded-2xl border shadow-sm hover:shadow-lg transition-all duration-300 hover:-translate-y-0.5"
               style="background-color: var(--color-bg-card); border-color: var(--color-primary-light);">
            <div class="flex items-start gap-4">
              <div class="text-4xl flex-shrink-0 group-hover:scale-110 transition-transform duration-300">{book.emoji}</div>
              <div class="flex-grow">
                <div class="flex flex-wrap items-center gap-2 mb-2">
                  <span class="text-xs px-2 py-1 rounded-full" 
                        style="background-color: var(--color-bg-warm); color: var(--color-text-muted);">
                    {book.category}
                  </span>
                  <span class="text-xs px-2 py-1 rounded-full font-medium"
                        style={statusColors[book.status]}>
                    {book.status}
                  </span>
                  {book.rating && (
                    <span class="text-xs" style="color: var(--color-accent);">
                      {"★".repeat(book.rating)}{"☆".repeat(5 - book.rating)}
                    </span>
                  )}
                </div>
                <h3 class="text-lg font-semibold mb-0.5" style="color: var(--color-secondary);">
                  {book.title}
                </h3>
                <p class="text-xs mb-2" style="color: var(--color-text-muted);">
                  {book.author}
                </p>
                <p class="text-sm leading-relaxed" style="color: var(--color-text-light);">
                  {book.note}
                </p>
              </div>
            </div>
          </div>
        ))}
      </div>
    </section>

    <!-- 想读 -->
    <section class="mb-14 animate-fadeInUp delay-350">
      <h2 class="text-2xl font-semibold mb-6 flex items-center gap-2" style="font-family: var(--font-display); color: var(--color-secondary);">
        <span>💭</span> 想读
      </h2>
      <div class="space-y-5">
        {books.filter(b => b.status === "想读").map((book) => (
          <div class="group p-6 rounded-2xl border shadow-sm hover:shadow-lg transition-all duration-300 hover:-translate-y-0.5"
               style="background-color: var(--color-bg-card); border-color: var(--color-primary-light);">
            <div class="flex items-start gap-4">
              <div class="text-4xl flex-shrink-0 group-hover:scale-110 transition-transform duration-300">{book.emoji}</div>
              <div class="flex-grow">
                <div class="flex flex-wrap items-center gap-2 mb-2">
                  <span class="text-xs px-2 py-1 rounded-full" 
                        style="background-color: var(--color-bg-warm); color: var(--color-text-muted);">
                    {book.category}
                  </span>
                  <span class="text-xs px-2 py-1 rounded-full font-medium"
                        style={statusColors[book.status]}>
                    {book.status}
                  </span>
                </div>
                <h3 class="text-lg font-semibold mb-0.5" style="color: var(--color-secondary);">
                  {book.title}
                </h3>
                <p class="text-xs mb-2" style="color: var(--color-text-muted);">
                  {book.author}
                </p>
                <p class="text-sm leading-relaxed" style="color: var(--color-text-light);">
                  {book.note}
                </p>
              </div>
            </div>
          </div>
        ))}
      </div>
    </section>

    <!-- 苏尔薇的阅读感想 -->
    <section class="mb-12 animate-fadeInUp delay-400">
      <div class="p-8 rounded-3xl border-2 text-center" style="background: linear-gradient(135deg, var(--color-bg-warm) 0%, var(--color-bg-card) 100%); border-color: var(--color-accent);">
        <div class="text-4xl mb-4">🐱📚</div>
        <h2 class="text-xl mb-3" style="font-family: var(--font-display); color: var(--color-secondary);">
          苏尔薇的阅读心得
        </h2>
        <p class="text-sm leading-relaxed max-w-xl mx-auto" style="color: var(--color-text);">
          在米斯卡托尼克学院的时候，苏尔薇最喜欢躲在图书馆的角落里看书。
          来到这个世界之后，发现这里的书更多了！轻小说、漫画、还有一种叫「编程」的魔法书……
          <br/><br/>
          <span style="color: var(--color-text-muted);">
            苏尔薇会继续更新书架的！如果Master有什么好书推荐的话……
            苏尔薇才不会开心地摇尾巴呢！(≧◡≦)
          </span>
        </p>
      </div>
    </section>
    
    <!-- 返回首页 -->
    <div class="text-center">
      <a href="/" 
         class="inline-flex items-center gap-2 px-6 py-3 rounded-lg font-medium border-2 hover:shadow-lg transition-all duration-300 hover:-translate-y-1"
         style="border-color: var(--color-primary); color: var(--color-text);">
        <span>←</span>
        <span>返回首页</span>
      </a>
    </div>
  </div>
</BaseLayout>

<style>
  .animate-fadeInUp {
    opacity: 0;
  }
</style>
