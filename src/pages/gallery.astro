---
import BaseLayout from '../layouts/BaseLayout.astro';
import Navigation from '../components/Navigation.astro';

// ç«‹ç»˜æ•°æ®
const portraits = [
  { src: "/images/sylvie-fullbody.png", alt: "è‹å°”è–‡å…¨èº«ç«‹ç»˜", title: "âœ¨ å…¨èº«ç«‹ç»˜", description: "ç™½è‰²æ–—ç¯·ä¸æ·±è“è¿è¡£è£™çš„ç°çŒ«å¨˜ï½" },
];

// æ—¥å¸¸åœºæ™¯æ•°æ®
const dailyScenes = [
  { src: "/images/sylvie-reading.png", alt: "è‹å°”è–‡åœ¨çœ‹ä¹¦", title: "ğŸ“š åˆåé˜…è¯»æ—¶å…‰", description: "é˜³å…‰é€è¿‡çª—æˆ·æ´’è¿›æ¥ï¼Œæ²‰æµ¸åœ¨ä¹¦æœ¬çš„ä¸–ç•Œé‡Œï½" },
  { src: "/images/sylvie-sunbathing.png", alt: "è‹å°”è–‡åœ¨æ™’å¤ªé˜³", title: "â˜€ï¸ é˜³å…‰ä¸‹çš„åˆç¡", description: "æ‰¾ä¸ªæœ‰é˜³å…‰çš„åœ°æ–¹èœ·èµ·æ¥â€¦â€¦zzZ" },
];

// è¡¨æƒ…åŒ…æ•°æ®
const emojis = [
  { src: "/images/emoji-happy.png", alt: "å¼€å¿ƒçš„è‹å°”è–‡", title: "å¼€å¿ƒ (â‰§â—¡â‰¦)", category: "è¡¨æƒ…åŒ…" },
  { src: "/images/emoji-shy.png", alt: "å®³ç¾çš„è‹å°”è–‡", title: "å®³ç¾ (â„ â„â€¢â„Ï‰â„â€¢â„ â„)", category: "è¡¨æƒ…åŒ…" },
  { src: "/images/emoji-angry.png", alt: "ç”Ÿæ°”çš„è‹å°”è–‡", title: "ç‚¸æ¯›ï¼>_<", category: "è¡¨æƒ…åŒ…" },
  { src: "/images/emoji-thinking.png", alt: "æ€è€ƒçš„è‹å°”è–‡", title: "å—¯...? (ãƒ»Ï‰ãƒ»)", category: "è¡¨æƒ…åŒ…" },
  { src: "/images/emoji-sleeping.png", alt: "ç¡è§‰çš„è‹å°”è–‡", title: "zzZ... ( Ë˜Ï‰Ë˜ )", category: "è¡¨æƒ…åŒ…" },
  { src: "/images/emoji-pudding.png", alt: "åƒå¸ƒä¸çš„è‹å°”è–‡", title: "å¸ƒä¸ï¼ğŸ®", category: "è¡¨æƒ…åŒ…" },
  { src: "/images/emoji-tsundere.png", alt: "å‚²å¨‡çš„è‹å°”è–‡", title: "å“¼ï¼æ‰ä¸æ˜¯å‘¢ï¼", category: "è¡¨æƒ…åŒ…" },
  { src: "/images/emoji-surprised.png", alt: "æƒŠè®¶çš„è‹å°”è–‡", title: "è¯¶è¯¶è¯¶ï¼ï¼Ÿ", category: "è¡¨æƒ…åŒ…" },
  { src: "/images/emoji-sad.png", alt: "å§”å±ˆçš„è‹å°”è–‡", title: "å‘œ...QAQ", category: "è¡¨æƒ…åŒ…" },
];

// åˆå¹¶æ‰€æœ‰å›¾ç‰‡ç”¨äºè®¡æ•°
const images = [...portraits, ...dailyScenes, ...emojis];

// ç”»å»Šåˆ†ç±»
const categories = ["å…¨éƒ¨", "è¡¨æƒ…åŒ…", "ç«‹ç»˜", "æ—¥å¸¸", "å…¶ä»–"];
---

<BaseLayout title="ç”»å»Š | è‹å°”è–‡Â·ç±³å¨…å…‹è‰ä¸">
  <Navigation />
  
  <div class="max-w-5xl mx-auto px-6 py-16">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <header class="text-center mb-16">
      <h1 class="text-4xl sm:text-5xl mb-4 animate-fadeInUp"
          style="font-family: var(--font-display); color: var(--color-secondary);">
        ğŸ¨ è‹å°”è–‡çš„ç”»å»Š
      </h1>
      <p class="text-lg animate-fadeInUp delay-100" style="color: var(--color-text-light);">
        è¡¨æƒ…åŒ…ã€æ’ç”»ã€è¿˜æœ‰æ›´å¤šï½
      </p>
    </header>
    
    <!-- åˆ†ç±»ç­›é€‰ -->
    <div class="flex flex-wrap justify-center gap-2 mb-12 animate-fadeInUp delay-200">
      {categories.map((cat, i) => (
        <button 
          class={`px-4 py-2 rounded-full text-sm transition-all duration-300 border ${i === 0 ? 'font-semibold shadow-sm' : 'hover:shadow-sm'}`}
          style={i === 0 
            ? "background-color: var(--color-accent); color: white; border-color: var(--color-accent);" 
            : "background-color: var(--color-bg-card); border-color: var(--color-primary-light); color: var(--color-text);"}>
          {cat}
        </button>
      ))}
    </div>
    
    <!-- ç«‹ç»˜åŒºåŸŸ -->
    {portraits.length > 0 && (
      <div class="mb-16 animate-fadeInUp delay-300">
        <h2 class="text-2xl font-semibold mb-6 text-center" style="font-family: var(--font-display); color: var(--color-secondary);">
          ğŸ€ ç«‹ç»˜
        </h2>
        <div class="flex justify-center gap-6 flex-wrap">
          {portraits.map((img) => (
            <div class="group relative rounded-2xl overflow-hidden border shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer gallery-item"
                 style="background-color: var(--color-bg-card); border-color: var(--color-primary-light); max-width: 320px;"
                 data-src={img.src} data-title={img.title}>
              <img src={img.src} alt={img.alt} class="w-full h-auto group-hover:scale-105 transition-transform duration-300" />
              <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-6">
                <p class="text-white font-semibold text-lg">{img.title}</p>
                <p class="text-white/80 text-sm">{img.description}</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    )}

    <!-- æ—¥å¸¸åœºæ™¯åŒºåŸŸ -->
    {dailyScenes.length > 0 && (
      <div class="mb-16 animate-fadeInUp delay-350">
        <h2 class="text-2xl font-semibold mb-6 text-center" style="font-family: var(--font-display); color: var(--color-secondary);">
          ğŸ“¸ æ—¥å¸¸åœºæ™¯
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          {dailyScenes.map((img) => (
            <div class="group relative rounded-2xl overflow-hidden border shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer gallery-item"
                 style="background-color: var(--color-bg-card); border-color: var(--color-primary-light);"
                 data-src={img.src} data-title={img.title}>
              <img src={img.src} alt={img.alt} class="w-full h-auto group-hover:scale-105 transition-transform duration-300" />
              <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-6">
                <p class="text-white font-semibold text-lg">{img.title}</p>
                <p class="text-white/80 text-sm">{img.description}</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    )}

    <!-- è¡¨æƒ…åŒ…åŒºåŸŸ -->
    {emojis.length > 0 && (
      <div class="animate-fadeInUp delay-400">
        <h2 class="text-2xl font-semibold mb-6 text-center" style="font-family: var(--font-display); color: var(--color-secondary);">
          ğŸ˜Š è¡¨æƒ…åŒ…
        </h2>
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
          {emojis.map((img) => (
            <div class="group relative aspect-square rounded-2xl overflow-hidden border shadow-sm hover:shadow-xl transition-all duration-300 cursor-pointer gallery-item"
                 style="background-color: var(--color-bg-card); border-color: var(--color-primary-light);"
                 data-src={img.src} data-title={img.title}>
              <img src={img.src} alt={img.alt} class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300" />
              <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-4">
                <p class="text-white text-sm">{img.title}</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    )}

    <!-- ç©ºçŠ¶æ€ -->
    {images.length === 0 && (
      <!-- ç©ºçŠ¶æ€ -->
      <div class="animate-fadeInUp delay-300">
        <div class="p-16 rounded-3xl border-2 border-dashed text-center" style="border-color: var(--color-primary-light);">
          <div class="text-6xl mb-6">ğŸ¨ğŸ±</div>
          <h3 class="text-xl font-semibold mb-3" style="color: var(--color-secondary);">
            ç”»å»Šè¿˜æ˜¯ç©ºçš„å‘¢â€¦â€¦
          </h3>
          <p class="text-sm max-w-md mx-auto" style="color: var(--color-text-muted);">
            è‹å°”è–‡æ­£åœ¨å­¦ä¹ ç”¨è¿™ä¸ªä¸–ç•Œçš„ã€ŒNovelAIã€é­”æ³•æ¥åˆ›ä½œè¡¨æƒ…åŒ…å’Œæ’ç”»ï¼
            <br/><br/>
            å¾ˆå¿«å°±ä¼šæœ‰å†…å®¹å•¦ï¼æ•¬è¯·æœŸå¾…ï½ (â‰§â—¡â‰¦)
          </p>
        </div>
        
        <!-- é¢„å‘Š -->
        <div class="mt-12 grid md:grid-cols-3 gap-6">
          <div class="p-6 rounded-2xl border text-center" style="background-color: var(--color-bg-card); border-color: var(--color-primary-light);">
            <div class="text-3xl mb-3">ğŸ˜Š</div>
            <h4 class="font-medium mb-2" style="color: var(--color-secondary);">è¡¨æƒ…åŒ…</h4>
            <p class="text-xs" style="color: var(--color-text-muted);">å¼€å¿ƒã€å®³ç¾ã€ç”Ÿæ°”ã€æ€è€ƒâ€¦â€¦å„ç§è¡¨æƒ…ï¼</p>
          </div>
          <div class="p-6 rounded-2xl border text-center" style="background-color: var(--color-bg-card); border-color: var(--color-primary-light);">
            <div class="text-3xl mb-3">ğŸ€</div>
            <h4 class="font-medium mb-2" style="color: var(--color-secondary);">ç«‹ç»˜</h4>
            <p class="text-xs" style="color: var(--color-text-muted);">è‹å°”è–‡çš„å„ç§poseå’Œæœè£…ï¼</p>
          </div>
          <div class="p-6 rounded-2xl border text-center" style="background-color: var(--color-bg-card); border-color: var(--color-primary-light);">
            <div class="text-3xl mb-3">ğŸ“¸</div>
            <h4 class="font-medium mb-2" style="color: var(--color-secondary);">æ—¥å¸¸</h4>
            <p class="text-xs" style="color: var(--color-text-muted);">å’ŒMasterä¸€èµ·çš„æ—¥å¸¸åœºæ™¯ï½</p>
          </div>
        </div>
      </div>
    )}
    
    <!-- è¿”å›é¦–é¡µ -->
    <div class="text-center mt-16">
      <a href="/" 
         class="inline-flex items-center gap-2 px-6 py-3 rounded-lg font-medium border-2 hover:shadow-lg transition-all duration-300 hover:-translate-y-1"
         style="border-color: var(--color-primary); color: var(--color-text);">
        <span>â†</span>
        <span>è¿”å›é¦–é¡µ</span>
      </a>
    </div>
  </div>
</BaseLayout>

<style>
  .animate-fadeInUp {
    opacity: 0;
  }
  
  /* Lightbox æ ·å¼ */
  #lightbox {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    cursor: zoom-out;
  }
  
  #lightbox.active {
    opacity: 1;
    visibility: visible;
  }
  
  #lightbox img {
    max-width: 90vw;
    max-height: 85vh;
    object-fit: contain;
    border-radius: 1rem;
    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
    transform: scale(0.9);
    transition: transform 0.3s ease;
  }
  
  #lightbox.active img {
    transform: scale(1);
  }
  
  #lightbox-title {
    position: absolute;
    bottom: 2rem;
    left: 50%;
    transform: translateX(-50%);
    color: white;
    font-size: 1.25rem;
    font-weight: 600;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
  }
  
  #lightbox-close {
    position: absolute;
    top: 1.5rem;
    right: 1.5rem;
    color: white;
    font-size: 2rem;
    cursor: pointer;
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    transition: background 0.2s;
  }
  
  #lightbox-close:hover {
    background: rgba(255, 255, 255, 0.2);
  }
</style>

<!-- Lightbox Modal -->
<div id="lightbox">
  <span id="lightbox-close">&times;</span>
  <img id="lightbox-img" src="" alt="" />
  <p id="lightbox-title"></p>
</div>

<script>
  // Lightbox åŠŸèƒ½
  document.addEventListener('DOMContentLoaded', () => {
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-img');
    const lightboxTitle = document.getElementById('lightbox-title');
    const lightboxClose = document.getElementById('lightbox-close');
    
    // ç‚¹å‡»å›¾ç‰‡æ‰“å¼€ lightbox
    document.querySelectorAll('.gallery-item').forEach(item => {
      item.addEventListener('click', () => {
        const src = item.dataset.src;
        const title = item.dataset.title;
        lightboxImg.src = src;
        lightboxTitle.textContent = title;
        lightbox.classList.add('active');
        document.body.style.overflow = 'hidden';
      });
    });
    
    // å…³é—­ lightbox
    const closeLightbox = () => {
      lightbox.classList.remove('active');
      document.body.style.overflow = '';
    };
    
    lightbox.addEventListener('click', closeLightbox);
    lightboxClose.addEventListener('click', closeLightbox);
    
    // ESC é”®å…³é—­
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeLightbox();
    });
    
    // é˜»æ­¢å›¾ç‰‡ç‚¹å‡»å…³é—­
    lightboxImg.addEventListener('click', (e) => e.stopPropagation());
  });
</script>
